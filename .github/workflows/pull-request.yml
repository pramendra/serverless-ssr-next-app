name: CICD on PR
on:
  - pull_request
jobs:
  test:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        node-version: [10.18.1]
    name: Setup, test & lint ${{ matrix.node-version }}
    steps:
      - name: Set tag var
        id: pr_number
        run: echo ::set-env name=BRANCH_NAME::$(echo pr$(jq --raw-output .number "$GITHUB_EVENT_PATH"))
      - name: print pr name
        shell: bash
        run: |
          echo "/${{secrets.SERVICE_NAME}}-${{ env.pr_number }}-${{secrets.SERVICE_NAME_FUNCTION}}"
  test1:
    needs: [test]
    runs-on: ubuntu-latest
    strategy:
      matrix:
        node-version: [10.18.1]
    name: Setup, test & lint ${{ matrix.node-version }}
    steps:
      - name: print pr name
        shell: bash
        run: |
          echo "/${{secrets.SERVICE_NAME}}-${{ env.pr_number }}-${{secrets.SERVICE_NAME_FUNCTION}}"
